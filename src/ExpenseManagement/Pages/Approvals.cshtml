@page
@model ExpenseManagement.Pages.ApprovalsModel
@{
    ViewData["Title"] = "Approvals";
}

<div class="card">
    <div class="card-header">
        <h1 class="card-title">Approve Expenses</h1>
    </div>
    
    <p style="color: var(--gray-500); margin-bottom: 1.5rem;">Pending expenses:</p>
    
    @if (Model.PendingExpenses.Count == 0)
    {
        <p style="text-align: center; color: var(--gray-500); padding: 2rem;">No expenses pending approval.</p>
    }
    else
    {
        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Employee</th>
                    <th>Category</th>
                    <th>Amount</th>
                    <th>Description</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var expense in Model.PendingExpenses)
                {
                    <tr>
                        <td>@expense.ExpenseDate.ToString("dd/MM/yyyy")</td>
                        <td>@expense.UserName</td>
                        <td>@expense.CategoryName</td>
                        <td>Â£@expense.Amount.ToString("N2")</td>
                        <td>@expense.Description</td>
                        <td>
                            <form method="post" asp-page-handler="Approve" style="display: inline;">
                                <input type="hidden" name="expenseId" value="@expense.ExpenseId" />
                                <button type="submit" class="btn btn-success" style="padding: 0.25rem 0.75rem; font-size: 0.875rem;">Approve</button>
                            </form>
                            <form method="post" asp-page-handler="Reject" style="display: inline;">
                                <input type="hidden" name="expenseId" value="@expense.ExpenseId" />
                                <button type="submit" class="btn btn-danger" style="padding: 0.25rem 0.75rem; font-size: 0.875rem;">Reject</button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
</div>
